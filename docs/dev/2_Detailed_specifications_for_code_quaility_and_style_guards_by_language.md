# π“‘ [Krepis] 2. μ–Έμ–΄λ³„ μ½”λ“ ν’μ§ λ° μ¤νƒ€μΌ κ°€λ“ μƒμ„Έ λ…μ„Έ

## 2.1 TypeScript ν’μ§ ν‘μ¤€ (The Governance)

### [2.1.1] λ…λ… λ° μ„ μ–Έ κ·μΉ™

- **μΈν„°νμ΄μ¤ (I-Prefix):** λ¨λ“  μΈν„°νμ΄μ¤λ” `I` μ ‘λ‘μ‚¬λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤ (μ:
  `IUserRepository`). μ΄λ” κµ¬μ²΄ ν΄λμ¤μ™€ μ¶”μƒ μΈν„°νμ΄μ¤λ¥Ό μ‹κ°μ μΌλ΅ μ¦‰μ‹
  λ¶„λ¦¬ν•μ—¬ μ•„ν‚¤ν…μ² νλ¦„ νμ•…μ„ λ•μµλ‹λ‹¤.
- **Decorator & Metadata:** DI ν΄λμ¤μ—λ” `@Injectable()`κ³Ό ν•¨κ» μ•„ν‚¤ν…μ²
  λ©”νƒ€λ°μ΄ν„° λ°μ½”λ μ΄ν„°(`@DomainService`, `@ApplicationUseCase`,
  `@InfraAdapter`)λ¥Ό λ°λ“μ‹ λ³‘κΈ°ν•μ—¬ λ μ΄μ–΄μ μ†μ†μ„ λ…ν™•ν ν•©λ‹λ‹¤.

### [2.1.2] μ—„κ²©λ„ (Strictness) λ° μ„ν¬νΈ μ μ•½

- **Zero Any Policy:** `any` μ‚¬μ©μ€ μ›μΉ™μ μΌλ΅ κΈμ§€ν•λ©°, μ»΄νμΌ μ—λ¬λ΅
  μ²λ¦¬ν•©λ‹λ‹¤. λ¶κ°€ν”Όν• κ²½μ° `unknown`μ„ μ‚¬μ©ν•κ³  Type Guardλ¥Ό κ±°μ³μ•Ό ν•©λ‹λ‹¤.
- **Import κ°€λ“:** `ESLint`μ™€ `dependency-cruiser`λ¥Ό μ—°λ™ν•μ—¬, μƒμ„
  λ μ΄μ–΄(Domain)κ°€ ν•μ„ λ μ΄μ–΄(Infra)μ κµ¬μ²΄ ν΄λμ¤λ¥Ό μ„ν¬νΈν•λ” κ²ƒμ„ λΉλ“
  νƒ€μ„μ— μ°¨λ‹¨ν•©λ‹λ‹¤.

## 2.2 Rust ν’μ§ ν‘μ¤€ (The Performance)

### [2.2.1] μ•μ „μ„± λ° λ¦°νΈ μμ¤€

- **Clippy (Pedantic+):** `clippy::pedantic`μ„ κΈ°λ³Έ μ μ©ν•λ©°, μ¶”κ°€λ΅
  `clippy::all`, `clippy::nursery` μ¤‘ μ•μ •μ„±μ΄ κ²€μ¦λ κ·μΉ™μ„ ν™μ„±ν™”ν•©λ‹λ‹¤.
- **Unsafe κ΄€λ¦¬:** `unsafe` λΈ”λ΅μ€ μ„±λ¥μƒ λ°λ“μ‹ ν•„μ”ν• κ²½μ°μ—λ§ ν—μ©ν•λ©°,
  μƒλ‹¨μ— `// SAFETY: <μ΄μ >` μ£Όμ„μ„ ν†µν•΄ λ©”λ¨λ¦¬ μ•μ „μ„±μ΄ ν™•λ³΄λ λ…Όλ¦¬μ  κ·Όκ±°λ¥Ό
  λ°λ“μ‹ λ…μ‹ν•΄μ•Ό ν•©λ‹λ‹¤.

### [2.2.2] μ—λ¬ μ²λ¦¬ λ° λ¨λ“ κ°€μ‹μ„±

- **Error Bridge:** Rustμ `Result<T, E>`λ” μ „μ© λ³€ν™ νΈλ μ΄νΈλ¥Ό ν†µν•΄ TSμ
  `StandardError` κ°μ²΄λ΅ μλ™ λ§¤ν•‘λ©λ‹λ‹¤.
- **Encapsulation:** λ¨λ“  λ¨λ“κ³Ό ν•„λ“λ” κΈ°λ³Έμ μΌλ΅ `pub(crate)` λλ” `private`μ„
  μ μ§€ν•λ©°, ν¨ν‚¤μ§€ μ™Έλ¶€λ΅ λ…Έμ¶λλ” μΈν„°νμ΄μ¤λ§ μ—„κ²©ν•κ² `pub`μΌλ΅ μ„ μ–Έν•©λ‹λ‹¤.

## 2.3 κ³µν†µ ν‘μ¤€ λ° μλ™ν™” (The Integration)

### [2.3.1] μ¤νƒ€μΌ λ° λ¬Έμ„ν™”

- **Case Conversion:** `NAPI-RS` μ„¤μ •μ„ ν†µν•΄ Rustμ `snake_case`μ™€ TSμ
  `camelCase`λ¥Ό μλ™ λ³€ν™ν•©λ‹λ‹¤. κ°λ°μλ” κ° μ–Έμ–΄μ κ΄€λ΅€(Idiom)μ—λ§ μ§‘μ¤‘ν•©λ‹λ‹¤.
- **Documentation First:** λ¨λ“  κ³µκ°(Public) APIλ” `JSDoc` λλ” `Rustdoc`μ΄
  λ„λ½λ  κ²½μ° λΉλ“ κ²½κ³ λ¥Ό λ°μƒμ‹ν‚µλ‹λ‹¤. μ΄λ” `Typedoc`κ³Ό `Cargo doc`μ„ ν†µν•΄ ν†µν•©
  λ¬Έμ„ μ‚¬μ΄νΈλ΅ μλ™ λ°°ν¬λ©λ‹λ‹¤.

### [2.3.2] μ½”λ“ μ„μƒ λ° λΌμ΄μ„ μ¤ κ΄€λ¦¬

- **TODO/FIXME μ ν•:** `TODO` μ£Όμ„μ΄ ν¬ν•¨λ μ½”λ“λ” λ΅μ»¬ κ°λ°μ€ ν—μ©ν•λ‚,
  `Production` λΉλ“ μ‹μ—λ” μ—λ¬λ¥Ό λ°μƒμ‹μΌ κΈ°μ  λ¶€μ±„κ°€ λ§μ¤ν„° λΈλμΉμ— λ°©μΉλλ”
  κ²ƒμ„ λ§‰μµλ‹λ‹¤.
- **Copyright Header:** λ¨λ“  μ†μ¤ νμΌ μƒλ‹¨μ— Krepis λΌμ΄μ„ μ¤ μ •λ³΄(Apache-2.0)μ™€
  μ†μ κ¶ λ¬Έκµ¬λ¥Ό μλ™μΌλ΅ μ‚½μ…ν•λ” μ»¤μ¤ν…€ μ¤ν¬λ¦½νΈλ¥Ό `pre-commit` λ‹¨κ³„μ—
  λ°°μΉν•©λ‹λ‹¤.

---

## π› οΈ ν’μ§ κ°€λ“ κµ¬μ„± μ”μ•½ ν…μ΄λΈ”

| κµ¬λ¶„            | TypeScript (ESLint/Prettier)      | Rust (Clippy/Rustfmt)                     |
| --------------- | --------------------------------- | ----------------------------------------- |
| **ν•µμ‹¬ λ…λ…**   | `I` Interface, `PascalCase` Type  | `snake_case` Func, `PascalCase` Struct    |
| **μ—„κ²©λ„**      | `Strict: true`, `No-Any`          | `Pedantic`, `No-Unsafe (without comment)` |
| **λ μ΄μ–΄ κ°€λ“** | Layer-based Import Restriction    | Crate-level Visibility Control            |
| **μ—λ¬ μ²λ¦¬**   | Try-Catch with Custom Error Class | Result<T, E> with anyhow/thiserror        |
| **μλ™ν™”**      | Git Hooks (Husky)                 | Cargo Check / Clippy CI                   |

---
